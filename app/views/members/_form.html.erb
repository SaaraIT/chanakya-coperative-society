<style>
        @font-face {
            font-family: 'Baloo';
            src: url('https://fonts.gstatic.com/s/balootamma2/v2/vEFK2_hCAgcR46PaajtrYlBbd7wf8tK1W77HtMo.ttf') format('truetype');
        }

        /* Set page size to A4, portrait */
        @page {
            size: A4 portrait;
            margin: 12mm;
        }

        .container.report {
            font-family: 'Baloo', sans-serif;
            font-size: 20px;
            text-align: justify;
            margin: 0;
            
            
        }

        .container {
            width: 100%;
            padding: 20px;
        }

        /* Header Section */
        .header-table {
            width: 100%;
            border: 0;
            margin-bottom: 10px;
            line-height: 1.2;
        }

        .header-table td {
            vertical-align: top;
            padding: 5px;
        }

        .logo {
            width: 160px;
            height: 160px;
        }

        .header-text {
            text-align: center;
        }

        .header-text h1, .header-text h2, .header-text p, .header-text h3 {
            margin: 0;
        }

        .header-text h1 {
            font-size: 24px;
            font-weight: bold;
        }

        .header-text h2 {
            font-size: 24px;
            margin: 5px 0;
        }

        .header-text p {
            font-size: 16px;
            margin: 5px 0;
        }

        .header-text h3 {
            font-size: 22px;
            margin: 5px 0;
            font-weight: bold;
        }

        .photo-box {
            width: 160px;
            height: 180px;
            border: 1px solid black;
            padding: 5px;
            text-align: center;
        }

        .photo-box p {
            font-size: 10px;
            margin-top: 40px;
        }

        .form-section {
            margin-top: 30px;
        }

        .signature {
            border-top: 1px solid black;
            width: 200px;
            margin-top: 10px;
        }

        .footer {
            text-align: center;
            font-weight: bold;
            margin-top: 40px;
        }

        /* Styling for lines above and below the content */
        .line-section {
            border-top: 1px solid black;
            border-bottom: 1px solid black;
            padding: 10px 0;
            margin: 0px 0;
        }

        .line-section p {
            margin: 0;
            font-size: 20px;
        }
        
        .separator {
          border-bottom: 1px solid black; /* Creates a horizontal line */
          margin: 10px 0; /* Adjust spacing */
        }
        
        .table-bordered th, .table-bordered td {
           border-left: 0px;
           border-top: 0px;
           border-bottom: 0px;
           border-right: 1px solid black !important;
           border-collapse: collapse !important;
           font-weight: normal;
        }

        .table-bordered{width: 100%}
        .table-bordered   th:first-child, .table-bordered   td:first-child, .table-bordered   td.left-align, .table-bordered.left-align td, .table.left-align td{text-align: left; padding-left: 0px}
        .table-bordered   th:last-child{border-right: 0px !important}
        .table-bordered   td:last-child{border-right: 0px !important}
        .table-bordered td.with-border{border-bottom: 1px solid black !important;}
        .table.without-border td{border-bottom: 0px !important;}
        
        .table.zero-margin{margin-bottom: 0px; border-bottom: 0px}
        .small-padding th, .small-padding td {padding: 5px 10px}
        div.no-margin{margin: 0px}
        .table tbody tr td, .table tbody tr th{background: none !important}
        .table thead tr td, .table thead tr th{background: none !important}
        .table tbody tr {background: none !important}
        .table thead tr {background: none !important}
        .list-table {background: none !important}
        .table {background: none !important}

        th, td {
          padding: 6px;
          text-align: center;
        }
        
         .box {
            border: 2px solid black;
            padding: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        .signatures {
            display: flex;
            justify-content: space-around;
            padding: 10px;
        }
        .office-note {
            text-align: center;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .footer {
    display: flex;
    justify-content: space-between;
    width: 100%;
}

   .left {
      float: left;
      text-align: left;
    }

.right {
    float: right;
    width: 50%;
}

 .clearfix {
      clear:both;
    }
        .right-align {
            text-align: right;
            font-weight: bold;
        }
        
        .align-center {
          text-align: center;
        }
        
       .labels {
      display: flex;
      display: -webkit-flex;
      flex-direction: column;
      white-space: nowrap; /* Prevents label text wrapping */
      
    }

    .value {
       
      padding: 5px;
      margin-left: 20px;
      min-width: 200px; /* Ensures space for name */
    }

    
    .wrapper {
      display: grid;
      grid-template-columns: auto 1fr; /* Left column auto-size, right column flexible */
      gap: 10px; /* Space between columns */
      align-items: center; /* Centers "Vijendra Rao" vertically */
      margin-bottom: 10px;
    }

    .table-layout {
  display: table;
  width: 100%;
  border-collapse: collapse;
}

.table-row {
  display: table-row;
  border-bottom: 1px solid #000;
}

.table-row.no-border{
    border-bottom: none;
}

.table-cell {
  display: table-cell;
  padding: 5px 10px;
  vertical-align: top; /* Ensures text aligns properly */
}

.table-row .table-cell:first-child{
  padding: 5px 0px; 
}

.number {
  width: 1%; /* Adjust width as needed */
  text-align: left; /* Aligns numbers to the right */
  font-weight: bold;
}

.labels {
  width: 30%; /* Adjust width as needed */
}

.labels .label-text {
  display: block; /* Each label appears on a new line */
}

.value {
  width: 35%;
  padding-left: 20px; /* Adds space between labels and value */
  font-weight: bold;
  white-space: nowrap; /* Ensures the value doesn’t wrap */
  vertical-align: middle;
}

span.text-danger{font-size: 130%}

 .page, .page-break { clear: both; page-break-after: always; }
 

       .table-bordered th.number{border-right: 0px !important; vertical-align: top}
       .table-bordered thead th.left-align{text-align: left}
       .table-bordered tr td.no-border{border-right: 0 !important; border-left: 0 !important; }

       /* Validation error styling */
       .field_with_errors {
         display: inline;
       }

       /* Ensure select fields are visible */
       .table-cell.value table td {
         vertical-align: top;
       }

       .table-cell.value select,
       .table-cell.value .input,
       .table-cell.value .select {
         display: block !important;
         width: 100% !important;
         visibility: visible !important;
         opacity: 1 !important;
       }

       /* Simple form select wrapper */
       .input.select {
         display: block !important;
       }

       /* Ensure all select elements are visible */
       select {
         display: block !important;
         width: 100% !important;
         visibility: visible !important;
         opacity: 1 !important;
         height: auto !important;
         min-height: 40px !important;
         padding: 8px 12px !important;
         border: 1px solid #e0e0e0 !important;
         background-color: white !important;
         color: #333 !important;
       }

       /* Religion select in table */
       #member_religion {
         display: block !important;
         width: 100% !important;
         min-width: 200px !important;
       }

       /* Ensure all checkboxes are visible */
       .input.boolean {
         display: inline-block !important;
         visibility: visible !important;
         opacity: 1 !important;
       }

       input[type="checkbox"] {
         display: inline-block !important;
         visibility: visible !important;
         opacity: 1 !important;
         width: auto !important;
         height: auto !important;
         min-width: 18px !important;
         min-height: 18px !important;
         margin-right: 8px !important;
         cursor: pointer !important;
         position: relative !important;
         vertical-align: middle !important;
       }

       .boolean.optional label,
       label.boolean.optional {
         display: inline-block !important;
         visibility: visible !important;
         opacity: 1 !important;
         margin-left: 5px !important;
         cursor: pointer !important;
         vertical-align: middle !important;
       }

       /* Specific checkbox styling */
       #member_caste_category,
       #member_religion_other,
       #same_address,
       #same_address1 {
         display: inline-block !important;
         visibility: visible !important;
         opacity: 1 !important;
         pointer-events: auto !important;
         z-index: 1 !important;
       }

       .error, .invalid-feedback, .help-block {
         color: transparent !important;
         background-color: #e53935;
         padding: 5px 10px;
         border-radius: 4px;
         font-size: 0;
         margin-top: 5px;
         display: inline-block;
         height: 10px;
       }

       .field_with_errors input,
       .field_with_errors select,
       .field_with_errors textarea {
         border-color: #e53935 !important;
         background-color: #ffebee !important;
       }

       /* Mobile responsive styles */
       @media screen and (max-width: 768px) {
         body {
           font-size: 14px;
         }

         .form-wrapper {
           padding: 5px !important;
           max-width: 100vw !important;
           width: 100% !important;
           margin: 0 !important;
           box-sizing: border-box;
           overflow-x: hidden;
         }

         .container.report {
           font-size: 14px;
           padding: 10px !important;
           max-width: 100% !important;
           width: 100% !important;
           box-sizing: border-box;
           overflow-x: hidden;
         }

         .header-table {
           display: block;
         }

         .header-table tr {
           display: block;
         }

         .header-table td {
           display: block;
           width: 100% !important;
           text-align: center !important;
           padding: 10px 0;
         }

         .logo {
           width: 80px;
           height: 80px;
           margin: 0 auto;
           display: block;
         }

         .photo-box {
           width: 120px;
           height: 140px;
           margin: 0 auto;
         }

         .header-text h1 {
           font-size: 16px;
         }

         .header-text h2 {
           font-size: 16px;
         }

         .header-text h3 {
           font-size: 14px;
         }

         .header-text p {
           font-size: 12px;
         }

         /* Make table layout responsive */
         .table-layout {
           display: block;
         }

         .table-row {
           display: block;
           border-bottom: 1px solid #000;
           padding: 10px 0;
         }

         .table-cell {
           display: block;
           width: 100% !important;
           padding: 5px 0;
         }

         .table-cell.number {
           display: inline-block;
           width: auto !important;
           vertical-align: top;
         }

         .table-cell.labels {
           display: inline-block;
           width: calc(100% - 30px) !important;
           vertical-align: top;
         }

         .table-cell.value {
           display: block;
           width: 100% !important;
           margin-left: 20px;
           padding-left: 0;
         }

         /* Make tables responsive */
         .table-bordered,
         .table {
           font-size: 12px;
         }

         .table-bordered th,
         .table-bordered td,
         .table th,
         .table td {
           padding: 5px;
           font-size: 12px;
         }

         /* Stack table cells vertically on mobile */
         table.table-bordered thead,
         table.table-bordered tbody,
         table.table-bordered tr,
         table.table-bordered td,
         table.table-bordered th {
           display: block;
           width: 100%;
         }

         table.table-bordered tr {
           margin-bottom: 15px;
           border: 1px solid #000;
         }

         table.table-bordered td,
         table.table-bordered th {
           border: none !important;
           border-bottom: 1px dotted #000 !important;
           text-align: left !important;
           padding-left: 10px !important;
         }

         table.table-bordered td:last-child,
         table.table-bordered th:last-child {
           border-bottom: none !important;
         }

         /* Nested tables in address section */
         .table-cell.value table {
           width: 100%;
         }

         .table-cell.value table tr {
           display: block;
         }

         .table-cell.value table td {
           display: block;
           width: 100%;
           margin-bottom: 10px;
         }

         /* Footer section */
         .footer {
           display: block;
         }

         .footer .left,
         .footer .right {
           float: none;
           width: 100% !important;
           text-align: left !important;
           margin-bottom: 20px;
         }

         /* Form inputs */
         input[type="text"],
         input[type="number"],
         input[type="email"],
         input[type="tel"],
         input[type="date"],
         select,
         textarea {
           width: 100% !important;
           max-width: 100% !important;
           font-size: 16px !important; /* Prevents zoom on iOS */
           background-color: white !important;
           color: #333 !important;
         }

         /* Ensure all inputs have white background on mobile */
         input, select, textarea {
           background-color: white !important;
           color: #333 !important;
         }

         /* Make labels more visible on mobile */
         label {
           color: #000 !important;
           font-weight: 600 !important;
           font-size: 14px !important;
           margin-bottom: 5px !important;
           display: block !important;
         }

         .label-text {
           color: #000 !important;
           font-weight: 600 !important;
           font-size: 14px !important;
         }

         /* Table cell labels */
         .table-cell.labels {
           color: #000 !important;
           font-weight: 600 !important;
         }

         .table-cell.labels .label-text {
           color: #000 !important;
           font-weight: 600 !important;
         }

         /* Table headers and cells */
         th, td {
           color: #000 !important;
         }

         /* Fix table backgrounds on mobile */
         table, table.table, table.table-bordered {
           background-color: white !important;
         }

         table tbody tr, table thead tr {
           background-color: white !important;
         }

         table tbody tr td, table tbody tr th,
         table thead tr td, table thead tr th {
           background-color: white !important;
         }

         .table-layout, .table-row, .table-cell {
           background-color: white !important;
         }

         /* Make all text visible and bold on mobile */
         .container.report {
           color: #000 !important;
         }

         .container.report p,
         .container.report span,
         .container.report div {
           color: #000 !important;
         }

         /* Header text */
         .header-text h1, .header-text h2, .header-text h3, .header-text p {
           color: #000 !important;
           font-weight: 700 !important;
         }

         /* All paragraph and span text */
         p, span, div {
           color: #000 !important;
         }

         /* Number labels */
         .table-cell.number {
           color: #000 !important;
           font-weight: 700 !important;
         }

         /* Signatures table */
         .signatures table tr td {
           display: table-cell;
           width: 33.33%;
         }

         /* Box styling */
         .box {
           padding: 10px;
           font-size: 12px;
         }

         /* Hide page breaks on mobile */
         .page-break {
           page-break-after: auto;
         }

         /* Adjust padding for mobile */
         div[style*="padding: 20px"] {
           padding: 10px !important;
         }

         span.text-danger {
           font-size: 100%;
         }

         /* Make submit button full width */
         .btn-primary {
           width: 100%;
           padding: 15px;
           font-size: 16px;
           background-color: #2196F3 !important;
           color: white !important;
           border: none !important;
           border-radius: 4px !important;
           cursor: pointer !important;
         }

         /* Fix age field and other number inputs */
         input[type="number"] {
           width: 100% !important;
           min-width: 100px !important;
         }

         #member_age {
           width: 100% !important;
           min-width: 100px !important;
         }

         /* Fix form groups and inputs */
         .form-group {
           width: 100% !important;
           max-width: 100% !important;
           margin-bottom: 15px;
         }

         input, select, textarea {
           max-width: 100% !important;
           box-sizing: border-box;
         }

         /* Fix select dropdowns */
         .select-wrapper {
           width: 100% !important;
         }

         .select-wrapper input.select-dropdown {
           width: 100% !important;
           max-width: 100% !important;
         }

         /* Prevent table cell overflow in nested tables */
         .table-cell.value table td {
           overflow-x: hidden;
           max-width: 100%;
         }

         /* Fix image containers */
         .photo-box img {
           max-width: 100%;
           height: auto;
         }

         /* Hide horizontal scrollbar while keeping functionality */
         * {
           -ms-overflow-style: none;
           scrollbar-width: none;
         }

         *::-webkit-scrollbar {
           display: none;
         }
       }

       /* Tablet responsive styles */
       @media screen and (min-width: 769px) and (max-width: 1024px) {
         .container.report {
           font-size: 16px;
         }

         .header-text h1 {
           font-size: 20px;
         }

         .header-text h2 {
           font-size: 20px;
         }

         input[type="text"],
         input[type="number"],
         input[type="email"],
         input[type="tel"],
         input[type="date"],
         select,
         textarea {
           font-size: 14px;
         }
       }
    </style>

<div class="form-wrapper" style="padding: 20px; max-width: 1400px; margin: 0 auto;">

<%= simple_form_for @member, html: { multipart: true, novalidate: true, data: { turbo: false } }, defaults: { error: false } do |f| %>

  <div class="container report">
    <!-- Header Section as a Table -->
    <table class="header-table">
        <tr>
            <!-- Left-aligned Logo -->
            <td style="width: 120px;">
                <%= wicked_pdf_image_tag asset_url('logo.png'), class: "logo", alt: "Logo" %>
            </td>

            <!-- Centered Header Text -->
            <td class="header-text" style="text-align: center; flex-grow: 1;">
                <h1>Shri Guru Chanakya Souharda Sahakari Sangha Ltd.</h1>
                <h2>ಶ್ರೀ ಗುರು ಚಾಣಕ್ಯ ಸೌಹಾರ್ದ ಸಹಕಾರಿ ಸಂಘ ನಿಯಮಿತ</h2>
                <p><%= Current.branch.english_address %></p>
                <p>Phone: <%= Current.branch.phone_no %></p>
                <p>(R. NO. <%= Current.branch.r_no %>)</p>
                <h3>APPLICATION FOR "A"/ "B" CLASS MEMBERSHIP</h3>
                <p>"ಎ" "ಬಿ" ತರಗತಿಯ ಸದಸ್ಯತ್ವಕ್ಕಾಗಿ ಅರ್ಜಿ</p>
            </td>

            <!-- Right-aligned Photo Box -->
            <td style="width: 100px; text-align: center;">
                <div class="photo-box">
                    <% if @member.profile_picture.attached? && @member.profile_picture.persisted? %>
                        <%= image_tag @member.profile_picture, style: "max-width: 150px; max-height: 170px;" %>
                    <% else %>
                        <p>Paste Photo</p>
                    <% end %>
                </div>
                <div style="margin-top: 10px;">
                    <%= f.input :profile_picture, as: :file, label: false, error: false, input_html: { accept: 'image/*', id: 'profile_picture_input', style: 'display: none;' } %>

                    <div style="margin-top: 10px;">
                        <button type="button" class="btn btn-small blue waves-effect" onclick="openCameraModal()" style="margin: 2px;">
                            <i class="material-icons left">camera_alt</i>Take Photo
                        </button>
                        <button type="button" class="btn btn-small grey waves-effect" onclick="document.getElementById('profile_picture_input').click()" style="margin: 2px;">
                            <i class="material-icons left">upload</i>Upload
                        </button>
                    </div>
                </div>
            </td>
        </tr>
    </table>
    <div class="separator"></div>
 
    <div class="table-layout">
      <div class="table-row">
        <div class="table-cell number">1.</div>
        <div class="table-cell labels">
          <span class="label-text">ಅರ್ಜಿದಾರನ ಹೆಸರು: <span class="text-danger">*</span></span>
          <span class="label-text">Name of the Applicant:</span>
          <span class="label-text">(IN CAPITAL LETTER)</span>
        </div>
        <div class="table-cell value"><%= f.input :name, label: false, error: false %></div>
      </div>
      <div class="table-row">
        <div class="table-cell number">2.</div>
        <div class="table-cell labels">
          <span class="label-text">ತಂದೆ/ಗಂಡನ ಹೆಸರು:<span class="text-danger">*</span></span>
          <span class="label-text">Father's/Husband's Name:</span>
        </div>
        <div class="table-cell value">
            <table>
                <tr> <td><%= f.input :father_or_husband,
            as: :select,
            collection: ['Father', 'Husband'],
            prompt: 'Select Relation',
            label: false,
            error: false,
            input_html: { title: 'Select Father or Husband' } %> </td>
              <td><%= f.input :father_or_husband_name, label: false, error: false, input_html: { title: 'Enter Father/Husband Name' } %></td>
           </tr></table>
       </div>
      </div>
      <div class="table-row">
        <div class="table-cell number">3.</div>
        <div class="table-cell labels">
          <span class="label-text">ಮೊಬೈಲ್ ಸಂಖ್ಯೆ:<span class="text-danger">*</span></span>
          <span class="label-text">Mobile No.:</span>
        </div>
        <div class="table-cell value"><%= f.input :mobile_number, label: false, error: false %></div>
      </div>
    </div>
 
    
    <table class="table table-bordered zero-margin" style="width:100%;">
  <thead>
    <tr>
      <th class="number">4.</th>
      <th class="left-align">ಆಧಾರ್ ಸಂಖ್ಯೆ <span class="text-danger">*</span><br> Aadhaar No. <br> <div style="margin-top: 15px; font-weight: bold;"> <%= f.input :aadhaar_number, label: false, error: false %></div> </th>
      <th>ಗುರುತು ಚೀಟಿ ಸಂಖ್ಯೆ <br> Voter ID No <br><div style="margin-top: 15px; font-weight: bold;"><%= f.input :voter_id, label: false, error: false %></div> </th>
      <th>ಪಾನ್ ಕಾರ್ಡ್ ಸಂಖ್ಯೆ <br> Pan card No <br><div style="margin-top: 15px; font-weight: bold;"><%= f.input :pan_card, label: false, error: false %></div> </th>
      <th>ಡ್ರೈವಿಂಗ್ ಲೈಸೆನ್ಸ್ ನಂ <br> D.L.No <br><div style="margin-top: 15px; font-weight: bold;"><%= f.input :driving_license, label: false, error: false %></div> </th>
    </tr>
  </thead>
</table>
    <div class="separator no-margin"></div>
    <table class="table table-bordered zero-margin">
    <tr>
        <th rowspan="2" class="number">5.</th>
        <td rowspan="2" style="width: 10%; vertical-align: top" class="left-align">
                        ವಯಸ್ಸು <span class="text-danger">*</span><br>Age: <br /><div style="margin-top: 15px; font-weight: bold;"> <%= f.input :age, label: false, error: false %></div>
        </td>
        <td style="width: 85%; padding-left: 10px"  class="with-border left-align">
             <div class="table-row no-border">
                <div class="table-cell number">6.</div>
                  <div class="table-cell labels">
                     <span class="label-text">  ವಿದ್ಯಾರ್ಹತೆ <span class="text-danger">*</span><br /> Educational qualification</span>

                  </div>
                  <div class="table-cell value"><%= f.input :education, label: false, error: false %></div>
             </div>
        </td>
    </tr>
    <tr>
        <td style="width: 50%; padding-left: 10px"  class="left-align">
             <div class="table-row no-border">
                <div class="table-cell number">7.</div>
                  <div class="table-cell labels">
                     <span class="label-text">  ಉದ್ಯೋಗ <span class="text-danger">*</span><br /> Occupation</span>

                  </div>
                  <div class="table-cell value"><%= f.input :occupation, label: false, error: false %></div>
             </div>
        </td>
    </tr>
</table>
     <div class="separator no-margin"></div>
    
    
    <table class="table table-bordered zero-margin left-align small-padding">
    <tr>
        <th rowspan="5" class="number">8. </th>
        <td colspan="2"> ಖಾಯಂ ವಿಳಾಸ <span class="text-danger">*</span><br> Permanent Address </td>
        <td colspan="2" style="padding-left: 10px"> ಪ್ರಸಕ್ತ ವಿಳಾಸ <span class="text-danger">*</span><br> Present Address:
           <div style="margin-top: 5px; display: inline-block;">
                <%= check_box_tag "same_address", "1", false, id: "same_address", style: "pointer-events: auto !important; cursor: pointer !important;" %>
                <%= label_tag "same_address", "Same as Permanent Address", style: "cursor: pointer; margin-left: 5px;" %>
           </div>
        </td>
    </tr>
    <tr>
        <td class='no-border'>H. NO/Building Name:</td>
        <td> <%= f.input :address_a_building, label: false, error: false %></td>
        <td class='no-border' style="padding-left: 10px">H. NO/Building Name:</td>
        <td><%= f.input :address_b_building, label: false, error: false %> </td>
    </tr>
    <tr>

        <td class='no-border'>Place, Village & Post:</td>
        <td> <%= f.input :address_a_village, label: false, error: false %> </td>
        <td class='no-border' style="padding-left: 10px">Place, Village & Post:</td>
        <td> <%= f.input :address_b_village, label: false, error: false %> </td>
    </tr>
    <tr>
        <td class='no-border'>Taluk/District:</td>
        <td> <%= f.input :address_a_district, label: false, error: false %> </td>
        <td class='no-border' style="padding-left: 10px">Taluk/District:</td>
        <td> <%= f.input :address_b_district, label: false, error: false %> </td>
    </tr>
    <tr>
        <td class='no-border'>Pincode:</td>
        <td> <%= f.input :address_a_pincode, label: false, error: false %> </td>
        <td class='no-border' style="padding-left: 10px">Pincode:</td>
        <td> <%= f.input :address_b_pincode, label: false, error: false %> </td>
    </tr>
</table>
    <div class="separator no-margin"></div>

<table class="table table-bordered text-center">
    <tr>
        <td> 9. ಧರ್ಮ / Religion: <span class="text-danger">*</span></td>
        <td> 9ಎ. &nbsp; ಪ. ಜಾತಿ/ಪ. ಪಂಗಡ <br /> SC/ST </td>
        <td> 9ಬಿ. ಇತರ </td>
    </tr>
    <tr>
        <td>    <%= f.select :religion, options_for_select(['Hindu', 'Muslim', 'Christian', 'Sikh', 'Buddhist', 'Jain', 'Parsi', 'Other']), prompt: 'Select Religion' %></td>
        <td> <%= f.input :caste_category,
            as: :boolean,
            label: 'Yes',
            wrapper_html: { class: 'd-inline-block me-3' } %> </td>
        <td><%= f.input :religion_other,
            as: :boolean,
            label: "Yes",
            wrapper_html: { class: 'd-inline-block me-3' } %>  </td>
    </tr>
</table>
<div class="separator no-margin"></div>
<%= f.fields_for :memberships do |membership_form| %>
<table class="table table-bordered  left-align">
    <tr>
        <td  style="width: 392px"> 10. ಪಾಲುಗಳ ಸಂಖ್ಯೆ <span class="text-danger">*</span><div style="padding-left: 25px">Number of shares Required </div> </td>
        <td style="width:100px; padding-left: 10px"><%= membership_form.input :number_of_shares, label: false, error: false %></td>
        <td style="width: 374px; padding-left: 10px"  class="left-align"> 10ಎ. ಮೊಬಲಗು  <span class="text-danger">*</span><div style="padding-left: 50px">Amount: </div> </td>
        <td style="min-width:100px; padding-left: 10px"><%= membership_form.input :amount, label: false, error: false %></td>
    </tr>
</table>
<div class="separator no-margin"></div>
<table class="table table-bordered">
    <tr>
        <th rowspan="5" class="number">11. </th>
        <td class="left-align" colspan=2>
            ವಾರಿಸುದಾರನ ಹೆಸರು ಮತ್ತು ವಿಳಾಸ ಹಾಗೂ ಅರ್ಜಿದಾರರೊಂದಿಗಿನ ಸಂಬಂಧ  <span class="text-danger">*</span>
        </td>
     </tr>
     <tr>
         <td class="left-align no-border">
            Name of the Nominee & Address:<span class="text-danger">*</span>
            
         </td>
         <td>
            <%= membership_form.input :nominee_name, label: false, error: false %> <br />
            <div style="margin-top: 5px; display: inline-block;">
                <%= check_box_tag "same_address1", "1", false, id: "same_address1", style: "pointer-events: auto !important; cursor: pointer !important;" %>
                <%= label_tag "same_address1", "Same as Permanent Address", style: "cursor: pointer; margin-left: 5px;" %>
            </div>
            <%= membership_form.input :nominee_address, label: false, error: false %>
        </td>
     </tr>
      <tr>
        <td class="left-align no-border">
            And Relationship with Applicant:<br> 
            with Mobile No:<span class="text-danger">*</span>
        </td>
        <td> <%= membership_form.select :nominee_relationship, 
                [
                  ["Aunty", "Aunty"],
                  ["Brother", "Brother"],
                  ["Brother in law", "Brother in law"],
                  ["Cousin", "Cousin"],
                  ["Daughter", "Daughter"],
                  ["Daughter in law", "Daughter in law"],
                  ["Father", "Father"],
                  ["Father in law", "Father in law"],
                  ["Friend", "Friend"],
                  ["Grand child", "Grand child"],
                  ["Grand daughter", "Grand daughter"],
                  ["Grand father", "Grand father"],
                  ["Grand mother", "Grand mother"],
                  ["Husband", "Husband"],
                  ["Mother", "Mother"],
                  ["Mother in law", "Mother in law"],
                  ["Nephew", "Nephew"],
                  ["Niece", "Niece"],
                  ["Other", "Other"],
                  ["Sister", "Sister"],
                  ["Sister in law", "Sister in law"],
                  ["Son", "Son"],
                  ["Son in law", "Son in law"],
                  ["Uncle", "Uncle"],
                  ["Wife", "Wife"]
                ], 
                { prompt: "Select Relationship" } %>
            
            <br /> <%=membership_form.input :nominee_phone, label: false, error: false %></td>
    </tr>
</table>
<br />

<div class="separator no-margin"></div>
<br />
    
    <div class="page-break"></div>
    <p>ಮೇಲೆ ತಿಳಿಸಿದ ಎಲ್ಲಾ ವಿಷಯಗಳು ಸತ್ಯ ಎಂದು ದೃಢೀಕರಿಸುತ್ತೇನೆ. ನಾನು ಸಹಕಾರಿಯ ಈಗ ಇರುವ ಮತ್ತು  ಇನ್ನು ಮುಂದಕ್ಕೆ ಆಗಿಂದಾಗ್ಗೆ ಜಾರಿಗೆ ತರುವ ಎಲ್ಲಾ ಕಾನೂನು ಕಾಯ್ದೆ ಹಾಗೂ ಉಪನಿಬಂಧನೆಗಳಿಗೆ ಬದ್ಧನಾಗಿರುತ್ತೇನೆ.</p>                                
      <p>I certify that the above information are correct to the best of my knowldge. I will abide by the existing rules of the sahakari and also rules which may come into force in future from time to time. </p>                     
                    
    <div class="footer">
    
    <div class="left" style="width: 400px;">
        <p>ಸ್ಥಳ: <br /> Place:   <%= membership_form.input_field :place, label: false, value: Current.branch.try(:name) %></p>
        <p>ದಿನಾಂಕ : <br /> Date: <%= membership_form.date_field :signed_date, label: false, value: Date.today %></p>
    </div>
    <div class="right" style="width: 230px;">
        <br />
        <br />
        <p class="align-center"> ಅರ್ಜಿದಾರನ ಸಹಿ <br> Signature of the Applicant</p>
    </div>
</div>
 <div class="clearfix"></div>        
                                
 <div class="box">
        <p>ಅರ್ಜಿದಾರನ ಮಾದರಿ ಸಹಿ<br>Specimen Signature of the Applicant:</p>
        <div class="signatures">
            <table class="table" style="width: 100%; margin-bottom: 30px">
              <tr>
                <td> 1 </td>
                <td> 2 </td>
                <td> 3 </td>
              </tr>
            </table>
        </div>
    </div>

    <!-- Office Note Section -->
    <br />
    <div class="office-note">
        <p>ಕೇಂದ್ರ ಕಛೇರಿಯ ಟಿಪ್ಪಣಿ</p>
        <p style="font-size: 130%">OFFICE NOTE</p>
    </div>

    <!-- Information Table -->
    <table class="table" style="width: 100%;">
        <tr>
            <td style="text-align: left; width: 390px;">ಸದಸ್ಯತ್ವ ಅಂಗೀಕರಿಸಿದ ನಿರ್ಣಯ ನಂಬ್ರ<br>Approved Resolution No: <br /> <%= membership_form.input :resolution_no, label: false, error: false %></td>
            <td>ದಿನಾಂಕ :<br>Date : <br /> <%= membership_form.date_field :resolution_date, label: false %></td>
            <td style="text-align: right">ಸದಸ್ಯ ನಂಬ್ರ<br>Member No. <br /> <%= f.input :member_no, label: false, error: false %></td>
        </tr>
    </table>
    <br />
    <div class="separator no-margin"></div>
 
<div class="footer">
    <div class="left" style="width: 400px;">
        <p>ಸ್ಥಳ: <br /> Place: <%= membership_form.input :md_sign_place, label: false, error: false, value: "Gurupura Kaikamba" %></p>
        <p>ದಿನಾಂಕ : <br /> Date: <%= membership_form.date_field :md_signed_date, label: false %></p>
    </div>
    <div class="right" style="width: 400px;  text-align: right;">
        <br />
        <br />
        <p>ಮುಖ್ಯ ಕಾರ್ಯನಿರ್ವಾಹಕ ಅಧಿಕಾರಿ<br> Chief Executive Officer/MD</p>
     
    </div>
</div>
<div class="clearfix"></div>       
   <div>
   <br />
   <br />
   ವಿಳಾಸ ದೃಢೀಕರಣಕ್ಕೆ ಪಡೆದುಕೊಂಡ ದಾಖಲೆಗಳು :
     <ul>
     <li>1  ಮತದಾನದ ಗುರುತು ಚೀಟಿ</li>
     <li>2  ಪಡಿತರ ಚೀಟಿ</li>
     <li>3  ಡ್ರೈವಿಂಗ್ ಲೈಸನ್ಸ್</li>
     <li>4  ಪಾಸ್ ಪೋರ್ಟ್</li>
     <li>5  ಆಧಾರ್ ಕಾರ್ಡ್</li>
     </ul>

     <div style="margin-top: 20px; padding: 15px; border: 1px solid #ddd; background-color: #f9f9f9;">
       <h4>Upload Documents / ದಾಖಲೆಗಳನ್ನು ಅಪ್ಲೋಡ್ ಮಾಡಿ</h4>

       <div style="margin-bottom: 15px;">
         <%= f.input :aadhar_card, as: :file, label: "Aadhar Card / ಆಧಾರ್ ಕಾರ್ಡ್ (Upload or Take Photo)", error: false, input_html: { accept: 'image/*,application/pdf', capture: 'environment' } %>
         <% if @member.aadhar_card.attached? %>
           <div style="margin-top: 10px;">
             <strong>Current Aadhar Card:</strong>
             <% if @member.aadhar_card.attached? && @member.aadhar_card.image? && @member.aadhar_card.persisted? %>
               <%= image_tag @member.aadhar_card, style: "max-width: 300px; margin-top: 10px;" %>
             <% else %>
               <%= link_to "View Aadhar Card", rails_blob_path(@member.aadhar_card, disposition: "attachment"), target: "_blank" %>
             <% end %>
           </div>
         <% end %>
       </div>
     </div>
</div>


</div>
<div class="separator "></div>

  <div class="form-group">
    <%= f.submit "Submit", class: "btn btn-primary" %>
  </div>
  <br />
<% end %>
<% end %>
</div>

<script>
  let addressCheckboxesInitialized = false;
  let fileUploadInitialized = false;

  function initializeAll() {
    initializeAddressCheckboxes();
    initializeFileUpload();
  }

  function initializeAddressCheckboxes() {
    
     addressCheckboxesInitialized = false;

    const sameAddress = document.getElementById("same_address");
    const sameAddress1 = document.getElementById("same_address1");

    if (sameAddress) {
      const handleSameAddressChange = function() {
        // Use querySelector as fallback for more robust element selection
        const aBuilding = document.getElementById("member_address_a_building") || document.querySelector('input[name="member[address_a_building]"]');
        const aVillage = document.getElementById("member_address_a_village") || document.querySelector('input[name="member[address_a_village]"]');
        const aDistrict = document.getElementById("member_address_a_district") || document.querySelector('input[name="member[address_a_district]"]');
        const aPincode = document.getElementById("member_address_a_pincode") || document.querySelector('input[name="member[address_a_pincode]"]');

        const bBuilding = document.getElementById("member_address_b_building") || document.querySelector('input[name="member[address_b_building]"]');
        const bVillage = document.getElementById("member_address_b_village") || document.querySelector('input[name="member[address_b_village]"]');
        const bDistrict = document.getElementById("member_address_b_district") || document.querySelector('input[name="member[address_b_district]"]');
        const bPincode = document.getElementById("member_address_b_pincode") || document.querySelector('input[name="member[address_b_pincode]"]');

        if (sameAddress.checked) {
          if (aBuilding && bBuilding) bBuilding.value = aBuilding.value;
          if (aVillage && bVillage) bVillage.value = aVillage.value;
          if (aDistrict && bDistrict) bDistrict.value = aDistrict.value;
          if (aPincode && bPincode) bPincode.value = aPincode.value;
        } else {
          if (bBuilding) bBuilding.value = "";
          if (bVillage) bVillage.value = "";
          if (bDistrict) bDistrict.value = "";
          if (bPincode) bPincode.value = "";
        }
      };

      sameAddress.addEventListener("change", handleSameAddressChange);
      sameAddress.addEventListener("click", handleSameAddressChange);

      // Also listen for changes in permanent address fields to update present address if checkbox is checked
      const permanentAddressFields = [
        document.getElementById("member_address_a_building") || document.querySelector('input[name="member[address_a_building]"]'),
        document.getElementById("member_address_a_village") || document.querySelector('input[name="member[address_a_village]"]'),
        document.getElementById("member_address_a_district") || document.querySelector('input[name="member[address_a_district]"]'),
        document.getElementById("member_address_a_pincode") || document.querySelector('input[name="member[address_a_pincode]"]')
      ];

      permanentAddressFields.forEach(field => {
        if (field) {
          field.addEventListener("input", function() {
            if (sameAddress.checked) {
              // Call the handler to copy values
              handleSameAddressChange();
            }
          });
        }
      });
    }

    if (sameAddress1) {
      const handleSameAddress1Change = function() {
        const aBuilding = document.getElementById("member_address_a_building") || document.querySelector('input[name="member[address_a_building]"]');
        const aVillage = document.getElementById("member_address_a_village") || document.querySelector('input[name="member[address_a_village]"]');
        const aDistrict = document.getElementById("member_address_a_district") || document.querySelector('input[name="member[address_a_district]"]');
        const aPincode = document.getElementById("member_address_a_pincode") || document.querySelector('input[name="member[address_a_pincode]"]');

        const nomineeAddress = document.getElementById("member_memberships_attributes_0_nominee_address") || document.querySelector('textarea[name="member[memberships_attributes][0][nominee_address]"]');

        if (sameAddress1.checked) {
          if (aBuilding && aVillage && aDistrict && aPincode && nomineeAddress) {
            nomineeAddress.value = `${aBuilding.value}, ${aVillage.value}, ${aDistrict.value}, ${aPincode.value}`;
          }
        } else {
          if (nomineeAddress) nomineeAddress.value = "";
        }
      };

      sameAddress1.addEventListener("change", handleSameAddress1Change);
      sameAddress1.addEventListener("click", handleSameAddress1Change);

      // Also listen for changes in permanent address fields to update nominee address if checkbox is checked
      const permanentAddressFields1 = [
        document.getElementById("member_address_a_building") || document.querySelector('input[name="member[address_a_building]"]'),
        document.getElementById("member_address_a_village") || document.querySelector('input[name="member[address_a_village]"]'),
        document.getElementById("member_address_a_district") || document.querySelector('input[name="member[address_a_district]"]'),
        document.getElementById("member_address_a_pincode") || document.querySelector('input[name="member[address_a_pincode]"]')
      ];

      permanentAddressFields1.forEach(field => {
        if (field) {
          field.addEventListener("input", function() {
            if (sameAddress1.checked) {
              // Call the handler to copy values
              handleSameAddress1Change();
            }
          });
        }
      });
    }

    // Scroll to first field with error if validation fails
    const firstError = document.querySelector('.field_with_errors input, .field_with_errors select, .field_with_errors textarea');
    if (firstError) {
      firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
      firstError.focus();
    }
  }

  // Listen for both turbo:load (when Turbo is enabled) and DOMContentLoaded (when Turbo is disabled)
  document.addEventListener("turbo:load", function () {
  initializeAddressCheckboxes();
  initializeFileUpload();
});

  // Camera Modal Functions
  let videoStream = null;
  let canvas = null;
  let video = null;

  function openCameraModal() {
    const modal = document.getElementById('cameraModal');
    modal.style.display = 'block';
    startCamera();
  }

  function closeCameraModal() {
    const modal = document.getElementById('cameraModal');
    modal.style.display = 'none';
    stopCamera();
  }

  async function startCamera() {
    try {
      // Check if camera API is available
      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
        alert('Camera access is not supported in this browser or requires HTTPS.\n\nPlease use the "Upload" button instead to select a photo from your device.');
        closeCameraModal();
        return;
      }

      video = document.getElementById('cameraVideo');
      canvas = document.getElementById('cameraCanvas');

      // Request camera access with front camera preference for selfies
      const constraints = {
        video: {
          facingMode: 'user', // Front camera for passport photos
          width: { ideal: 640 },
          height: { ideal: 480 }
        }
      };

      videoStream = await navigator.mediaDevices.getUserMedia(constraints);
      video.srcObject = videoStream;
    } catch (error) {
      let errorMessage = 'Error accessing camera: ';

      if (error.name === 'NotAllowedError' || error.name === 'PermissionDeniedError') {
        errorMessage += 'Camera permission was denied. Please allow camera access in your browser settings and try again.';
      } else if (error.name === 'NotFoundError' || error.name === 'DevicesNotFoundError') {
        errorMessage += 'No camera found on this device. Please use the "Upload" button to select a photo.';
      } else if (error.name === 'NotReadableError' || error.name === 'TrackStartError') {
        errorMessage += 'Camera is already in use by another application. Please close other apps using the camera and try again.';
      } else if (error.name === 'OverconstrainedError') {
        errorMessage += 'Camera does not support the requested configuration. Trying again...';
        // Try with simpler constraints
        try {
          const simpleConstraints = { video: true };
          videoStream = await navigator.mediaDevices.getUserMedia(simpleConstraints);
          video.srcObject = videoStream;
          return; // Success with fallback
        } catch (fallbackError) {
          errorMessage += '\nFallback also failed. Please use the "Upload" button.';
        }
      } else {
        errorMessage += error.message || 'Unknown error. Please use the "Upload" button instead.';
      }

      alert(errorMessage);
      closeCameraModal();
    }
  }

  function stopCamera() {
    if (videoStream) {
      videoStream.getTracks().forEach(track => track.stop());
      videoStream = null;
    }
  }

  function capturePhoto() {
    const video = document.getElementById('cameraVideo');
    const canvas = document.getElementById('cameraCanvas');
    const ctx = canvas.getContext('2d');

    // Set canvas dimensions to passport size ratio (3.5cm x 4.5cm = 350 x 450 pixels)
    const passportWidth = 350;
    const passportHeight = 450;
    canvas.width = passportWidth;
    canvas.height = passportHeight;

    // Calculate crop area to maintain aspect ratio
    const videoAspect = video.videoWidth / video.videoHeight;
    const targetAspect = passportWidth / passportHeight;

    let sx, sy, sw, sh;

    if (videoAspect > targetAspect) {
      // Video is wider, crop sides
      sh = video.videoHeight;
      sw = sh * targetAspect;
      sx = (video.videoWidth - sw) / 2;
      sy = 0;
    } else {
      // Video is taller, crop top/bottom
      sw = video.videoWidth;
      sh = sw / targetAspect;
      sx = 0;
      sy = (video.videoHeight - sh) / 2;
    }

    // Draw cropped and resized image
    ctx.drawImage(video, sx, sy, sw, sh, 0, 0, passportWidth, passportHeight);

    // Hide video, show preview
    video.style.display = 'none';
    document.getElementById('videoOverlay').style.display = 'none';
    document.getElementById('photoPreview').style.display = 'block';
    document.getElementById('previewImage').src = canvas.toDataURL('image/jpeg', 0.9);

    // Show/hide appropriate buttons
    document.getElementById('captureBtn').style.display = 'none';
    document.getElementById('usePhotoBtn').style.display = 'inline-block';
    document.getElementById('retakeBtn').style.display = 'inline-block';
  }

  function usePhoto() {
    const canvas = document.getElementById('cameraCanvas');

    // Show loading state
    const saveBtn = document.getElementById('usePhotoBtn');
    saveBtn.innerHTML = '<i class="material-icons left">hourglass_empty</i>Saving...';
    saveBtn.disabled = true;

    // Convert canvas to blob
    canvas.toBlob(function(blob) {
      // Create a File object
      const file = new File([blob], "passport_photo.jpg", { type: "image/jpeg" });

      // Create a DataTransfer to set the file
      const dataTransfer = new DataTransfer();
      dataTransfer.items.add(file);

      // Set the file to the input
      const fileInput = document.getElementById('profile_picture_input');
      fileInput.files = dataTransfer.files;

      // Trigger change event to update Rails
      const event = new Event('change', { bubbles: true });
      fileInput.dispatchEvent(event);

      // Show preview in photo box
      const photoBox = document.querySelector('.photo-box');
      if (photoBox) {
        const existingImg = photoBox.querySelector('img');
        if (existingImg) {
          existingImg.src = canvas.toDataURL('image/jpeg', 0.9);
        } else {
          const newImg = document.createElement('img');
          newImg.src = canvas.toDataURL('image/jpeg', 0.9);
          newImg.style = 'max-width: 150px; max-height: 170px;';
          photoBox.innerHTML = '';
          photoBox.appendChild(newImg);
        }
      }

      // Show success message
      saveBtn.innerHTML = '<i class="material-icons left">check_circle</i>Saved!';
      saveBtn.style.backgroundColor = '#4CAF50';

      // Close modal after a brief delay
      setTimeout(function() {
        closeCameraModal();
        // Reset button
        saveBtn.innerHTML = '<i class="material-icons left">check_circle</i>Save Photo';
        saveBtn.disabled = false;
        saveBtn.style.backgroundColor = '';
      }, 800);
    }, 'image/jpeg', 0.9);
  }

  function retakePhoto() {
    const video = document.getElementById('cameraVideo');

    // Hide preview, show video again
    document.getElementById('photoPreview').style.display = 'none';
    video.style.display = 'block';
    document.getElementById('videoOverlay').style.display = 'block';

    // Show/hide appropriate buttons
    document.getElementById('captureBtn').style.display = 'inline-block';
    document.getElementById('usePhotoBtn').style.display = 'none';
    document.getElementById('retakeBtn').style.display = 'none';
  }

  // Also handle regular file upload to show preview
  let fileUploadInitialized = false;

  function initializeFileUpload() {
    if (fileUploadInitialized) return;
    fileUploadInitialized = true;

    const fileInput = document.getElementById('profile_picture_input');
    if (fileInput) {
      fileInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file && file.type.startsWith('image/')) {
          const reader = new FileReader();
          reader.onload = function(e) {
            const photoBox = document.querySelector('.photo-box');
            if (photoBox) {
              const existingImg = photoBox.querySelector('img');
              if (existingImg) {
                existingImg.src = e.target.result;
              } else {
                const newImg = document.createElement('img');
                newImg.src = e.target.result;
                newImg.style = 'max-width: 150px; max-height: 170px;';
                photoBox.innerHTML = '';
                photoBox.appendChild(newImg);
              }
            }
          };
          reader.readAsDataURL(file);
        }
      });
    }
  }

  document.addEventListener("turbo:load", initializeAll);
  document.addEventListener("DOMContentLoaded", initializeAll);
</script>

<!-- Camera Modal -->
<div id="cameraModal" style="display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9);">
  <div style="position: relative; margin: 20px auto; max-width: 600px; background: white; padding: 20px; border-radius: 8px;">
    <span onclick="closeCameraModal()" style="position: absolute; top: 10px; right: 20px; font-size: 35px; font-weight: bold; color: #666; cursor: pointer;">&times;</span>

    <h4 style="margin-top: 0; color: #000;">Take Passport Photo</h4>

    <div style="position: relative; width: 100%; max-width: 400px; margin: 0 auto;">
      <video id="cameraVideo" autoplay playsinline style="width: 100%; border-radius: 8px;"></video>
      <canvas id="cameraCanvas" style="display: none;"></canvas>

      <!-- Passport size guide overlay -->
      <div id="videoOverlay" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); border: 2px dashed #fff; width: 70%; padding-bottom: 90%; pointer-events: none;">
        <div style="position: absolute; bottom: -30px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 4px; font-size: 12px; white-space: nowrap;">
          Position face in this area
        </div>
      </div>
    </div>

    <div id="photoPreview" style="display: none; margin-top: 20px; text-align: center;">
      <h5 style="color: #000;">Preview - Click "Save Photo" to use this image</h5>
      <img id="previewImage" style="max-width: 350px; border: 1px solid #ddd; border-radius: 4px;">
      <p style="color: #666; margin-top: 10px; font-size: 14px;">
        <i class="material-icons tiny" style="vertical-align: middle;">info</i>
        Your photo will be saved when you click the green "Save Photo" button below
      </p>
    </div>

    <div style="margin-top: 20px; text-align: center;">
      <button type="button" class="btn blue waves-effect" onclick="capturePhoto()" id="captureBtn" style="margin: 5px;">
        <i class="material-icons left">camera</i>Capture Photo
      </button>
      <button type="button" class="btn green waves-effect" onclick="usePhoto()" id="usePhotoBtn" style="display: none; margin: 5px;">
        <i class="material-icons left">check_circle</i>Save Photo
      </button>
      <button type="button" class="btn orange waves-effect" onclick="retakePhoto()" id="retakeBtn" style="display: none; margin: 5px;">
        <i class="material-icons left">refresh</i>Retake
      </button>
      <button type="button" class="btn grey waves-effect" onclick="closeCameraModal()" style="margin: 5px;">
        <i class="material-icons left">close</i>Cancel
      </button>
    </div>
  </div>
</div>

<style>
  #cameraModal video {
    background: #000;
  }

  #photoPreview {
    animation: fadeIn 0.3s;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Show/hide buttons based on state */
  #photoPreview:not([style*="display: none"]) ~ div #captureBtn {
    display: none !important;
  }

  #photoPreview:not([style*="display: none"]) ~ div #usePhotoBtn,
  #photoPreview:not([style*="display: none"]) ~ div #retakeBtn {
    display: inline-block !important;
  }
</style>

